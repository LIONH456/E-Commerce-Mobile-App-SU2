import 'package:cached_network_image/cached_network_image.dart';
import 'package:flutter/material.dart';


class CustomCachedNetworkImage extends StatelessWidget {
  const CustomCachedNetworkImage(
      {super.key,
      required this.imageUrl,
      this.aspectRatio,
      this.fit,
      this.borderRadius,
      this.width,
      this.height});

  final String imageUrl;
  final double? aspectRatio;
  final BoxFit? fit;
  final BorderRadiusGeometry? borderRadius;
  final double? width;
  final double? height;

  @override
  Widget build(BuildContext context) {
    return ConstrainedBox(
      constraints: BoxConstraints(
          maxWidth: width ?? double.infinity,
          maxHeight: height ?? double.infinity),
      child: AspectRatio(
        aspectRatio: aspectRatio ?? 1,
        child: ClipRRect(
          borderRadius: borderRadius ?? BorderRadius.zero,
          child: CachedNetworkImage(
            imageUrl: '${ApiService.imagesUrl}/$imageUrl',
            fit: fit,
            placeholder: (context, url) {
              return Shimmer.fromColors(
                baseColor: Colors.grey.shade300,
                highlightColor: Colors.grey.shade100,
                child: SizedBox(
                  width: width ?? double.infinity,
                  height: height ?? double.infinity,
                ),
              );
            },
            errorWidget: (context, url, error) =>
                const Icon(Icons.error_outline),
            cacheKey: '${ApiService.imagesUrl}/$imageUrl',
          ),
        ),
      ),
    );
  }
}
